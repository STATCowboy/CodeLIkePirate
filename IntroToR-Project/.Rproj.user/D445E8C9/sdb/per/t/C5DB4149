{
    "collab_server" : "",
    "contents" : "##########################################################\n#       Create & Test a Logistic Regression Model        #\n##########################################################\n\n# For R Server 9.0, load mrsdeploy package on R Server     \nlibrary(mrsdeploy)\n\n# Use logistic regression equation of vehicle transmission \n# in the data set mtcars to estimate the probability of \n# a vehicle being fitted with a manual transmission \n# based on horsepower (hp) and weight (wt)\n\n\n# Create glm model with `mtcars` dataset\ncarsModel <- glm(formula = am ~ hp + wt, data = mtcars, family = binomial)\n\n# Produce a prediction function that can use the model\nmanualTransmission <- function(hp, wt) {\n     newdata <- data.frame(hp = hp, wt = wt)\n     predict(carsModel, newdata, type = \"response\")\n}\n\n# test function locally by printing results\nprint(manualTransmission(120, 2.8)) # 0.6418125\n\n##########################################################\n#            Log into Microsoft R Server                 #\n##########################################################\n\n# Use `remoteLogin` to authenticate with R Server using \n# the local admin account. Use session = false so no \n# remote R session started\n# REMEMBER: Replace with your login details\nremoteLogin(\"http://localhost:12800\", \n            username = \"admin\", \n            password = \"Pa$$w0rd\",\n            session = FALSE)\n\n##########################################################\n#             Publish Model as a Service                 #\n##########################################################\n\n# Generate a unique serviceName for demos \n# and assign to variable serviceName\nserviceName <- paste0(\"mtService\", round(as.numeric(Sys.time()), 0))\n\n# Publish as service using publishService() function from \n# mrsdeploy package. Use the service name variable and provide\n# unique version number. Assign service to the variable `api`\napi <- publishService(\n     serviceName,\n     code = manualTransmission,\n     model = carsModel,\n     inputs = list(hp = \"numeric\", wt = \"numeric\"),\n     outputs = list(answer = \"numeric\"),\n     v = \"v1.0.0\"\n)\n\n##########################################################\n#                 Consume Service in R                   #\n##########################################################\n\n# Print capabilities that define the service holdings: service \n# name, version, descriptions, inputs, outputs, and the \n# name of the function to be consumed\nprint(api$capabilities())\n\n# Consume service by calling function, `manualTransmission`\n# contained in this service\nresult <- api$manualTransmission(120, 2.8)\n\n# Print response output named `answer`\nprint(result$output(\"answer\")) # 0.6418125   \n\n##########################################################\n#       Get Swagger File for this Service in R Now       #\n##########################################################\n\n# During this authenticated session, download the  \n# Swagger-based JSON file that defines this service\nswagger <- api$swagger()\ncat(swagger, file = \"swagger.json\", append = FALSE)\n\n# Now you can share Swagger-based JSON so others can consume it\n\n##########################################################\n#          Delete service version when finished          #\n##########################################################\n\n# User who published service or user with owner role can\n# remove the service when it is no longer needed\nstatus <- deleteService(serviceName, \"v1.0.0\")\nstatus\n\n##########################################################\n#                   Log off of R Server                  #\n##########################################################\n\n# Log off of R Server\nremoteLogout()",
    "created" : 1501335422715.000,
    "dirty" : false,
    "encoding" : "ISO8859-1",
    "folds" : "",
    "hash" : "2570031343",
    "id" : "C5DB4149",
    "lastKnownWriteTime" : 1501335595,
    "last_content_update" : 1501335595398,
    "path" : "C:/Users/Jamey/OneDrive/Documents/Statistics/R/Into-to-R-Session/Advanced-R-Services/RServerExampleWebService-mtcars.R",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}